<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_lumberjack_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>mask_64x64</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = 0.3

marker_name = asset_get_index("obj_lumberjack_maker")

working_tree_id = 0
working_lumber_mill_id = 0

inventory_size = 10

one_time_get = 5

delay = 0
DOT = 30

no_marker = false

marker = 0
lumber_value = 0

is_work_on = false
is_work = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>delay ++

if !is_work
{
    if speed = 0 {image_speed = 0.1; sprite_index = spr_lumberjack_idle;}
    if speed != 0 {image_speed = 0.5; sprite_index = spr_lumberjack_move;}
}

if instance_exists(obj_lumber_mill)
{
    working_lumber_mill_id = instance_nearest(x,y,obj_lumber_mill)
}
if instance_exists(obj_tree)
{
    working_tree_id = instance_nearest(x,y,obj_tree)
}
if is_work_on and instance_exists(working_tree_id)
and !instance_exists(marker) and lumber_value &lt; inventory_size and !no_marker
{
    marker = instance_create(working_tree_id.x,working_tree_id.y,marker_name)
    marker.owner_id = id
    no_marker = true
}

depth = -y-1

if delay &gt;= DOT and instance_exists(working_tree_id)
{
    if (abs(x - working_tree_id.x) &lt; 5 and abs(y - working_tree_id.y) &lt; 5)
    {
        image_speed = 0.4;
        sprite_index = spr_lumberjack_work;
        is_work = true
        delay = 0
    }
}

if is_work and delay &gt; DOT/2
{
    if instance_exists(working_tree_id) and inventory_size &gt; lumber_value
    {
        lumber_value += one_time_get
        working_tree_id.value -= one_time_get
    }
    is_work = false;
}

if lumber_value &gt;= inventory_size and instance_exists(working_lumber_mill_id) 
and !(abs(x - working_lumber_mill_id.x) &lt; 5 and abs(y - working_lumber_mill_id.y) &lt; 5) 
and !instance_exists(marker) and !no_marker
{
    marker = instance_create(working_lumber_mill_id.x,working_lumber_mill_id.y,marker_name)
    marker.owner_id = id
    no_marker = true
}

var char_speed = 7
if hspeed != 0 {image_xscale = -hspeed/char_speed}

if instance_exists(marker)
{
    if x &gt; marker.x {hspeed = -char_speed} else if x = marker.x {hspeed = 0}
    if x &lt; marker.x {hspeed = char_speed} else if x = marker.x {hspeed = 0}
    if y &gt; marker.y {vspeed = -char_speed} else if y = marker.y {vspeed = 0}
    if y &lt; marker.y {vspeed = char_speed} else if y = marker.y {vspeed = 0}
    if abs(x - marker.x) &lt; char_speed*2+1 {x = marker.x; hspeed = 0}
    if abs(y - marker.y) &lt; char_speed*2+1 {y = marker.y; vspeed = 0}
}else {speed = 0}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_lumber_mill">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.lumber += lumber_value
lumber_value = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.select_unit = id and not collision_point(mouse_x, mouse_y, UI_parent,true,true) and !is_work
{
    marker = instance_create(mouse_x,mouse_y,marker_name)
    marker.owner_id = id
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.select_unit = id
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.select_unit = id
{
    d3d_set_fog(true, c_white, 0, 0);
    for (i = 45; i &lt;= 405; i += 10)
    {
        draw_sprite_ext(sprite_index,image_index,x+lengthdir_x(1/2,i),y+2+lengthdir_y(1/2,i),1.1*image_xscale,1.1,0,c_black,1)
    }
    d3d_set_fog(false, c_white, 0, 0);
}

draw_self()
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
